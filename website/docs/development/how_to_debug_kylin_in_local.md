---
title: How to debug Kylin in IDEA without Hadoop
language: en
sidebar_label: How to debug in IDEA without Hadoop
pagination_label: How to debug in IDEA without Hadoop
toc_min_heading_level: 2
toc_max_heading_level: 6
pagination_prev: development/how_to_write_doc
pagination_next: development/how_to_debug_kylin_in_ide
keywords:
    - developer
    - debug
draft: false
last_update:
    date: 09/19/2022
    author: Tengting Xu
---

### Background

#### Why debug Kylin in IDEA without Hadoop
This article aims to introduce a simple and useful way to develop and debug Kylin for developers.

#### Deployment architecture

Following is the architecture of the current deployment.

![debug_in_laptop](./images/how_to_debug_kylin_in_local/laptop.png)

This guide **assumes** you have prepared the following things:

- [X] A **laptop** with macOS installed to do development work (Windows is not verified at the moment)
- [X] Kylin's source code is cloned into some directory on your laptop

:::info For Windows Dev Machine
For Windows dev machine, setup the Kylin dev env in [Windows Subsystem for Linux](https://learn.microsoft.com/en-us/windows/wsl/about) is the best option. Follow this guide on [how to install WSL with GUI](https://learn.microsoft.com/en-us/windows/wsl/tutorials/gui-apps), and install both the Kylin code and your favorite IDE (but not the docker) in WSL for best performance.
:::

### Prepare IDEA and build source code

#### Step 1: Check Software Requirement

Please visit [Software Requirement](how_to_package#software_reqiurement), and make sure your laptop has met the requirement.

#### Step 2: Build source code

- Build backend source code before your start debugging.
  
    ```shell
    cd <path-to-kylin-source>
    mvn clean install -DskipTests
    ```

- Build front-end source code.
  
    (Please use node.js **v12.14.0**, for how to use a specific version of node.js, please check [how to switch to a specific node js](how_to_package#install_older_node) )
    
    ```shell
    cd kystudio
    npm install
    ```
#### Step 3: Install IntelliJ IDEA and build the source

1. Install the IDEA Community edition (the Ultimate edition is ok too).

2. Import the source code into IDEA. Click the **Open**, and choose the directory of **Kylin source code**.
   ![](images/how_to_debug_kylin_in_local/OPEN_KYLIN_PROJECT.png)

3. Install the scala plugin and restart
   ![](images/how_to_debug_kylin_in_local/IDEA_Install_Scala_plugin.png)

4. Configure SDK(JDK and Scala), make sure you use **JDK 1.8.X** and **Scala 2.12.X**.
   ![](images/how_to_debug_kylin_in_local/IDEA_Notify_Install_SDK.png)

5. Reload maven projects, and the `scala` directory will be marked as source root(in blue color).
   ![](images/how_to_debug_kylin_in_local/IDEA_RELOAD_ALL_MAVEN_PROJECT.png)

6. Build the projects.(make sure you have executed `mvn clean package -DskipTests`, otherwise some source code is not generated by maven javacc plugin)
   ![](images/how_to_debug_kylin_in_local/PROJECT_BUILD_SUCCEED.png)

#### Step 4: Prepare IDEA configuration

1. Download spark and create running IDEA configuration for debug purpose and initialize the frontend env.
  ```shell
  ./dev-support/local/local.sh init
  ```

Following is the shell output.
![local.sh init](images/how_to_debug_kylin_in_local/IDEA_LOCAL_INIT.png)

### Prepare the Requirements

#### Deploy Zookeeper(Current only need Zookeeper)

1. Install latest docker desktop in your laptop

2. Check available resource of your docker desktop in laptop, make sure you leave 1 CPUs and 1 GB memory at least .

Following is the setting page of Docker Desktop of MacBook.

![resources](images/how_to_debug_kylin_in_local/docker-engine-resource.png)

3. Start Zookeeper service via docker compose on laptop.

  ```shell
  ./dev-support/local/local.sh up
  ```

![local.sh up](images/how_to_debug_kylin_in_local/docker_up.png)

#### Check status of Require services
- Check health of Zookeeper, you can use following command to check status

```shell
./dev-support/local/local.sh ps
```

Following output content shows all hadoop component are in health state.

![sandbox.sh ps](images/how_to_debug_kylin_in_local/docker_ps.png)

### Debug Kylin in IDEA

#### Start backend in IDEA

- Select "BootstrapServer[Local]" on top of IDEA and click **Run** .

![click BootstrapServer[local]](images/how_to_debug_kylin_in_local/RUN_KYLIN_IN_IDEA.png)

- Check if SparkUI of Sparder is started.

![Spark UI](images/how_to_debug_kylin_in_local/spark_ui.png)

#### Start frontend in IDEA

- Set up dev proxy
```shell
cd kystudio
npm run devproxy
```

![setup front end](images/how_to_debug_kylin_in_local/start_front_end.png)

#### Validate Kylin's core functions

- Visit Kylin WEB UI in your laptop

![setup front end](images/how_to_debug_kylin_in_local/kylin_ui.png)

- Create a new project, load table and create model

- Validate Cube Build and Query function

![build job](images/how_to_debug_kylin_in_local/local-build-succeed.png)

![query a agg index](images/how_to_debug_kylin_in_local/local-query-succeed.png)

### Command manual
1. Use `./dev-support/local/local.sh stop` to stop all containers
2. Use `./dev-support/local/local.sh start` to start all containers
3. Use `./dev-support/local/local.sh ps` to check status of all containers
4. Use `./dev-support/local/local.sh down` to stop all containers and delete them
